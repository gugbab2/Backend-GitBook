# 공유기 개요

## 공유기 개요

* **공유기의 Outbound 를 기준으로 액션이 일어나게 된다.** \
  **-> 변조와 관련된 자료구조를 NAT-Table 이라고 부른다.**&#x20;
* 일반적인 인터넷 공유기는 NAT(Network Address Translation) 기술이 적용된 장치이다.&#x20;
* 보통 IP 주소와 포트를 모두 제어한다. \
  \-> NAT 한다는 말은, 내부로 들어온 요청의 목적지 IP 값을 변경한다는 것을 의미한다.
* 인터넷 IP 주소 부족 문제를 해결해준다.\
  \-> 공인 IP(약 42억개 밖에 안된다,,) , 사설 IP 로 분리해 관리한다.
* 패킷 필터링 방화벽과 비슷한 **보안성**을 제공한다. \
  \-> 서버의 응답이 직접 클라이언트에게 전달되지 못한다. (꼭 공유기를 거치게 된다!)

## 공유기 구조에 따른 분류&#x20;

### Cone NAT

* **Host 단위**로 외부포트 지정&#x20;
* 다음과 같은 종류가 있다.&#x20;
  * Full Cone (속도가 중요한 서비스에서 사용)
  * Restricted Cone
    * IP Restricted Cone (IP 마다 외부포트 지정)
    * Port Restricted Cone (포트마다 외부포트 지정)

### Symmetric NAT

* **TCP 세션**마다 외부포트 지정
* 보안성이 높은 방식에 해당된다. (보안이 중요한 기업용 서비스에서 사용)
  * 동작 방식이 Packet Filtering 역할을 한다. \
    \-> Outbound 방식에 따라 NAT-Table 에 정보가 쌓인다. \
    \-> **NAT-Table 의 정보(호스트 포트, 목적지 IP, 목적지 포트) 를 기준으로 Serch 하기 때문에, 다른 외부 호스트에서 요청이 오더라도, NAT-Table 에 정보가 없다면 해당 요청을 Drop 한다.**&#x20;

## 공유기 네트워크 구성의 예

<figure><img src="../../../.gitbook/assets/스크린샷 2024-01-13 16.10.04.png" alt=""><figcaption></figcaption></figure>

* 공유기에서 부여하는 사설 IP 는 다음의 대역에서 부여된다. \
  **-> 192.168.x.x / 172.16.x.x / 10.x.x.x**\
  **-> 사설 IP 는 Internet 에서 사용되지 않는다. (이건 규칙이다!)**
