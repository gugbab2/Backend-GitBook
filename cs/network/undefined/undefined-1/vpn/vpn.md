# VPN 과 재택근무

## 재택근무 네트워크는 어떻게 구성될까?

<figure><img src="../../../../../.gitbook/assets/스크린샷 2024-01-16 22.23.03.png" alt="" width="563"><figcaption></figcaption></figure>

### 다음의 상황을 가정하자&#x20;

#### 부산지사에 근무하는 철수가 집에서 재택근무를 하면서 서울본사의 DB 서버를 접속하려면 어떻게 해야 하는가?

* 철수집의 호스트에서 VPN Client 솔루션을 설치한다.&#x20;
* **VPN 통신을 위한 패킷의 흐름은 다음과 같다.**&#x20;
  * VPN Client 솔루션을 설치한 철수집 9.9.9.9(철수집 공인IP) 에서 부산지사 SG 에 요청을 하고나면, 부산지사 대역대의 새로운 IP (3.3.3.50) 를 할당해준다.\
    -> 이때부터 철수집은 2개의 IP(9.9.9.9 / 3.3.3.50) 를 가지게 된다. &#x20;
  * 부산지사와 철수집 간의 터널링 작업을 선행한다.&#x20;
  * **철수집 3.3.3.50 에서 서울본사 5.5.5.100 을 접근하기 위한 패킷을 생성하고 요청을 보낸다.**&#x20;
  * **해당 패킷이 철수집에서 나갈 때 VPN Client 솔루션은 해당 패킷 전체를 암호화 하고 출발지를 9.9.9.9(철수집 본래 IP) 목적지를 3.3.3.1 로 설정한 헤더를 추가한 패킷으로 변경한 후 요청을 보낸다.**&#x20;
  * **해당 패킷이 3.3.3.1 SG 에 도착했을 때 해당 패킷 전체를 암호화하고 앞에 출발지를 3.3.3.1(부산지사 SG) 목적지를 5.5.5.1(서울본사 SG) 로 설정한 헤더를 추가한 패킷으로 변경한 후 요청을 보낸다.**&#x20;
  * **5.5.5.1(서울본사 SG) 로 패킷이 도착 후 앞에 헤더를 버리고 SG 암호화 설정에 따라 복호화를 진행한다.**&#x20;
  * **이후 기존 목적지인 5.5.5.100 서버로 접근한다.**&#x20;

#### **위 상황에서 5.5.5.100 서버 입장에서는 서울본사 네트워크나, 부산지사 네트워크나, 재택근무지나 다를바가 없다.**&#x20;
