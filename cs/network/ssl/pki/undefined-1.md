# 공개키 신뢰를 위한 검증체계

## 공개키 신뢰를 위한 검증체계

<figure><img src="../../../../.gitbook/assets/스크린샷 2024-01-19 15.35.07.png" alt="" width="563"><figcaption></figcaption></figure>

* 앞서 비대칭키 방식은 컴퓨팅 파워를 상당히 소모하는 방식이라고 설명한 바 있다.&#x20;
* 때문에, **한번 만들어진 비대칭키는 여러번 사용되어야 한다.** \
  **-> 일반적으로 1회 생성 시 6개월 \~ 1년 사용한다.**&#x20;
* **일반적으로 WEB(HTTP) 상에서는 비대칭키 형식이 아닌, X509 문서 형식의 SSL 인증서 형식으로 사용한다.** \
  **-> X509 문서는 SSL 인증서 정보, Public Key, Hash 값 등 다양한 정보를 포함하고 있다.** \
  **-> Hash 값은 CA 의 Private Key 로 암호화 되어있다.**&#x20;
* SSL 인증서 발급 방식은 다음과 같다.&#x20;
  * **WEB Server 담당자가 인증서 발급을 위해 RA(인증서 등록 대행) 업체에 구매요청을 한다.**&#x20;
  * **요청을 받은 RA 업체는 CA(인증서 발급) 업체에 인증서 발급 요청을 한다.**&#x20;
  * **CA 업체는 X509 문서 형식의 SSL 인증서와 Private Key 를 발급해 RA 업체에 전달한다.**&#x20;
  * **RA 업체는 WEB Server 담당자에게 인증서와 Private Key 를 전달하고, 담당자는 WEB Server 에 인증서와Private를 등록한다.**&#x20;

### HTTPS 통신방식

<figure><img src="../../../../.gitbook/assets/스크린샷 2024-01-19 15.49.19.png" alt=""><figcaption></figcaption></figure>

1. **클라이언트가 서버에 요청을 하게되면, Public Key 를 주는 것이 아닌, SSL 인증서를 주게된다.**&#x20;
2. **클라이언트는 기관인증서(CA 의 Public Key) 를 통해 인증서 내 Hash 값을 복호화 하고, Hash 값을 비교해 올바른 인증서인지 검증한다.** \
   **-> 운영체제 보안 업데이트 시 CA 의 Public Key 를 컴퓨터에 심어주게 된다.** &#x20;
3. **위 과정을 통해 올바른 인증서인지 검증이 되었다면, 인증서 내 Public Key 를 통해서 대칭키(Session Key)를 암호화 해 서버에 전달한다.**&#x20;
4. **이후, 클라이언트와 서버가 가지고 있는 대칭키를 기반으로 데이터를 암복호화해 통신한다.**&#x20;

## PKI 인증체계

<figure><img src="../../../../.gitbook/assets/스크린샷 2024-01-19 16.00.52.png" alt=""><figcaption></figcaption></figure>

* 위와 같이 X509 형식의 SSL 인증서를 통한 인증체계를 PKI 인증체계라고 부른다.&#x20;
* **SSL 인증서의 Hash 값은 CA 의 Private Key 로 암호화 되어있다.**&#x20;
* CA 와 RA&#x20;
  * CA : 인증서 발급과 취소의 실질적인 업무를 하는 기관이다.
  * RA : 사용자의 신분을 확인하고, CA 간 인터페이스를 제공하는 기관이다.&#x20;
