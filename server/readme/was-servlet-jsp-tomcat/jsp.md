# JSP

## 1. JSP 처리 과정

\-> WAS 는 JSP 페이지에 대한 요청이 들어오면 다음과 같은 처리를 한다.&#x20;

* **JSP에 해당하는 서블릿이 존재하지 않을 시**
  * **`JSP 페이지로부터 자바 코드(.java)를 생성한다.`**
  * **`자바 코드를 컴파일해서 서블릿 클래스(.class) 를 생성한다.`**
  * 서블릿에 클라이언트 요청을 전달한다.
  * 서블릿이 요청을 처리한 결과를 응답으로 생성한다.&#x20;
  * 응답을 웹 브라우저에 전달한다. &#x20;
* **JSP에 해당하는 서블릿이 존재하는 경우**
  * 서블릿에 클라이언트 요청을 전달한다.
  * 서블릿이 요청을 처리한 결과를 응답으로 생성한다.
  * 응답을 웹 브라우저에 전송한다.&#x20;

## 2. 출력 버퍼와 응답

* JSP 페이지는 응답 결과를 곧바로 웹 브라우저에 전송하지 않는다. \
  \-> 대신 **`출력 버퍼(Buffer)`**라고 불리는 곳에 임시로 응답 결과를 저장했다가 **`한번에 웹 브라우저에 전송한다.`**
* 이유는 다음과 같다.&#x20;
  * **성능 향상 : 작은 단위로 데이터를 전송하는 것이 아닌, 한번에 큰 단위로 데이터를 전송할 수 있다.**&#x20;
  * **에러 페이지 처리기능이 가능 : JSP 페이지가 생성한 내용이 있더라도, 버퍼에 저장된 데이터가 웹 브라우저로 전송되기 이전까지 버퍼에 저장된 내용을 지우고 새로운 내용을 전달할 수 있다.** \
    **-> ex) JSP 실행 과정에서 에러가 발생하면, 지금까지 생성한 내용을 버퍼에서 지우고 에러 화면을 출력할 수 있다.**
  * **버퍼가 다 차기 전에 헤더 정보를 변경 가능** &#x20;
* 기본적으로 적용되어 있는 `autoFlush=true` 설정을 통해 **버퍼에 담겨 있는 값들이 자동적으로 Flush 된다.**
