# 전술적 설계 - ENTITY 와 VALUE OBJECT

* 전술적 설계 - 전략적 설계(모델링) 을 통해서 도출한 결과물을 코드로 변경하는데 필요한 전술적 도구들
* &#x20;90년대 OOP -> 2000년대 DDD, 때문에 DDD 는 OOP 의 영향을 많이 받았다.&#x20;
  * 객체는 상태와 동작을 가진다.&#x20;

## VALUE OBJECT&#x20;

* 식별자가 없다? (애매혀;;)
  * 하지만 제이슨은 VALUE OBJECT 도 식별자가 있다고 생각한다.&#x20;
  * 아래 코드에서 **`new Name("Jason", "Park")` 자체로 식별자(값의 동등성, 복합키)로 생각한다.**&#x20;
  *

      <figure><img src="../../../../../.gitbook/assets/스크린샷 2025-02-11 21.46.17.png" alt=""><figcaption></figcaption></figure>
* 밸류 타입은 불변
  * **모든 객체는 일단 불변이 좋다고 생각하자.**&#x20;
  * **시작부터 불변으로 객체를 만들고, 특정 케이스에 가변으로 바꾸는 것으로 생각하자.**&#x20;
  * 서버 자원을 생각하면서 개발하는 시대는 지났다.
* 의미를 명확하게 표현하거나 두 개 이상의 데이터가 개념적으로 하나인 경우 이용
* 처음에는 동작하지 않고, **시스템이 성숙해짐에 따라서 데이터 값을 객체로 대체**&#x20;
  * 정말 `String` 으로 우편 번호를 표현할 수 있는가?&#x20;
* 항상 `equals()` 메서드를 오버라이드 할 것을 권고한다.&#x20;
  * VALUE OBJECT 는 기본적으로 값의 모음 자체가 식별자의 역할을 하기 때문에 `equals()`, `hashCode()` 를 오버라이딩 해주어야 한다.&#x20;

## ENTITY&#x20;

* 식별자를 갖는다.&#x20;
  * 객체의 상태 중 해당 객체의 고유한 성질을 표현할 수 있는 상태들을 식별자라고 부른다 .
* 식별자는 엔티티 객체마다 고유해서 각 엔티티는 서로 다른 식별자를 갖는다.&#x20;
  * 특정 규칙에 따라 생성&#x20;
  * UUID 사용&#x20;
  * 값을 직접 입력&#x20;
  * 일련번호 사용

### 언제 가변 객체(ENTITY)를 만들어야 할까?&#x20;

#### 예제1&#x20;

* 경호가 잠실에 살다가 선릉으로 이사를 하는데,&#x20;
* 이때, 잠심의 경호와 선릉의 경호는 같은 사람이지만 주소지가 변경되었다.&#x20;
* 때문에, 값이 바뀌더라도 똑같음을 보장할 수 있는 특수한 값(식별자)이 필요하다.&#x20;
  * 우리나라에서는 주민등록번호! , CI?
* 이때, ENTITY 를 사용하게 된다.&#x20;
* 식별자를 통해서 경호에 대한 히스토리를 확인하고 싶다.&#x20;

#### 예제2&#x20;

* 지폐의 경우 사용자의 입장에서는 VALUE OBJECT 로 사용되지만,
* 조폐공사의 입장에서는 ENEITY 로 사용된다.
* 컨텍스트에 따라서 다르게 해석된다.&#x20;
* 때문에, 전술적 설계를 하기 위해서는 전략적 설계가 선행되어야 한다.&#x20;
