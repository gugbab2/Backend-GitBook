# 전략적 설계 - BOUNDED CONTEXT

* 하위 도메인 : **자연스레** 나뉘어진다.&#x20;
* 바운디드 컨텍스트 : **인위적으로** 나뉘어진다. **내가 개발하기 편하게 분류하는 것이다.**

## 바운디드 컨텍스트&#x20;

* 분할과 정복은 큰 문제를 해결하는 방법이다.
* **비지니스를 바운디드 컨텍스트로 나누는 이유는 분할을 통해 비지니스를 정복하기 위해서이다!**
* 처음부터 바운디드 컨텍스트를 나누는 것이 아니다! 도메인 지식을 익히고 나서 큰덩어리 -> 작은덩어리의 방향으로 나누어야 한다.&#x20;

## 바운디드 컨텍스트 예시

### 키친포스, 제이슨의 예시 (컨택스트 맵)&#x20;

<figure><img src="../../../../../.gitbook/assets/스크린샷 2025-02-11 19.44.52.png" alt=""><figcaption></figcaption></figure>

* 점선 : 하위도메인&#x20;
* 실선 : 바운디드 컨텍스트
* 보통은 하위 도메인과 바운디드 컨텍스트가 1:1 로 매핑되는 경우는 많지 않다.&#x20;
  * 위 예시에서도 매장 주문, 주무 테이블 도메인을 제외하고는 1:1 로 매핑되지 않는다.&#x20;
  * 대체로 1:N 으로 매핑된다.&#x20;

#### 비슷해 보이는 컨택스트를 사용하는 방법&#x20;

1. 물리적으로 다른 컨택스트로 구분해서 사용 (분리)
2. profix 를 사용해 한 컨텍스트 내에서 구분하는 방법 (회피)&#x20;

* 상품, 메뉴 컨텍스트&#x20;
  * 상품이라는 하위 도메인을 가지고 있지만, 그 안에는 상품, 메뉴 컨텍스트를 포함하고 있다. (분리)&#x20;
* 매장 주문, 포장 주문, 배달 주문 컨텍스트&#x20;
  * 주문이라는 하위 도메인을 가지고 있지만, 그 안에는 매장 주문, 포장 주문, 배달 주문을 포함하고 있다. (분리)&#x20;
  * 각 주문 컨텍스트마다 가질 수 있는 상태가 각각 달라 혼돈이 있을 수 있다.&#x20;

### NEXTSTEP 사이트 (컨택스트 맵)

<figure><img src="../../../../../.gitbook/assets/스크린샷 2025-02-11 20.01.10.png" alt=""><figcaption></figcaption></figure>

* 컨택스트 맵을 통해서 거시적으로 시스템을 유추해 볼 수 있다.&#x20;
* U : upstream, 송신데이터&#x20;
* D : downstream, 수신데이터
* TIP!
  * 데이터의 흐름이 단방향으로 갈 수 있도록 노력한다.&#x20;
  * 데이터의 흐름이 양방향으로 간다는 말은, 결합도가 높다는 말이다. (결합도가 높다면, MSA 가 어려워진다)&#x20;
  * 패키지 레벨에서 먼저 분리하고 시작한다면, 경계가 명확해지기 때문에, MSA 가 쉬워진다.&#x20;
* 위에서는 사용하고자 하는 기능에 따라서 바운디드 컨텍스트를 나누었다.&#x20;

### help.dex.org

<figure><img src="../../../../../.gitbook/assets/스크린샷 2025-02-11 20.13.57.png" alt=""><figcaption></figcaption></figure>

* 바운디드 컨텍스트는 어려운 개념이 아니다. 어떠한 문제를 해결하고 싶은지에 맞춰서 나누는 것이다.&#x20;
  * ex, 나는 결제와 관련된 문제를 해결하고 싶다면 `PAYMENT & REFUNDS` 페이지를 클릭할 것이다.&#x20;

## 하위 도메인&#x20;

* 하위 도메인은 유스 케이스의 집합&#x20;
* 핵심 하위 도메인&#x20;
  * 요구 사항이 자주 변경되고 복잡하여 집중적인 투자가 필요한 하위 도메인&#x20;
  * 서비스의 핵심 기능!&#x20;
    * ex, NEXTSTEP 은 미션
    *

        <figure><img src="../../../../../.gitbook/assets/스크린샷 2025-02-11 20.23.36.png" alt=""><figcaption></figcaption></figure>
  * 하지만, 핵심 하위 도메인은 여러 외부요인에 따라서 변경된다!&#x20;
* 지원 하위 도메인&#x20;
  * 핵심 하위 도메인을 뒷받침하는 하위 도메인
  * 상대적으로 복잡도가 낮고, 외부요인에 따라서 핵심 하위 도메인이 될 수도 있다.&#x20;
* 일반 하위 도메인&#x20;
  * 구현에 시간과 노력을 투자하는 것보다 기성 제품을 구매하거나 오픈 소스 솔루션을 채택하는 것이 비용 면에서 더 효율적이다.&#x20;
  * ex, 결제는 토스 페이먼스 사용!&#x20;
  *

      <figure><img src="../../../../../.gitbook/assets/스크린샷 2025-02-11 20.25.29.png" alt=""><figcaption></figcaption></figure>

## 요구사항 vs 도메인 모델링&#x20;

* 요구사항 : 클라이언트의 요구
* 도메인 모델링 : 요구사항을 정의하기 위한 아이디네이션

#### 두 개념이 헷갈리는 이유&#x20;

* 실무에서는 두 개념을 정의하는 주체가 다르다 .
  * 클라이언트&#x20;
  * 개발자&#x20;
* 하지만, 우리 미션에서는 내가 두 개념을 정의한다. 그래서 헷갈린다.&#x20;
