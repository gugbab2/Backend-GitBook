# static 기본

## static 키워드 개념

* static 변수 : 모든 클래스에서 공유할 수 있는 변수로, 클래스 로딩 시에 클래스 영역에 할당 된다. \
  \-> 인스턴스 생성 없이 클래스 이름을 통해서 접근할 수 있다.&#x20;
* static 클래스 : 객체의 생성 없이 클래스 이름을 통해서 호출할 수 있는 메서드이다. 인스턴스 변수에 접근할 수 없으며(인스턴스가 생성되기 이전에 static 메서드가 생성되기 때문에, 시점에 차이가 있다) 주로, 유틸리티 메서드 등에 사용된다.&#x20;

## static 키워드 사용시 문제점

* 상태공유 : static 변수는 모든 인스턴스가 공유하는 변수이다. 때문에, 하나의 상태를 변경하면 모든 인스턴스에 영향을 미치기 때문에, 예상하지 못한 결과를 가져올 수 있다. \
  \-> 때문에, 무상태(stateless) 로 설계해야 한다.&#x20;
* 스레드 안정성 문제 : 여러 스레드가 동시에 static 변수를 수정하면 동기화 문제가 발생할 수 있습니다. 동시 수정에 대한 적절한 동기화 처리가 이루어지지 않으면 잘못된 결과가 나올 수 있습니다.
* 객체지향 원칙 위배 : static 메서드는 객체 지향 프로그래밍의 개념과 어울리지 않는 경우가 있습니다. 객체의 상태에 대한 작업을 수행하지 않고 전역적인 동작을 수행할 수 있어서 객체 지향 설계 원칙 중 하나인 캡슐화와 상충될 수 있습니다.
* 테스트 및 확장에 어려움 : static 메서드는 다른 클래스나 인터페이스에 의존하지 않고 독립적으로 실행되기 때문에, 테스트가 어려울 수 있습니다. 또한, 상속과 같은 객체 지향 개념을 적용하기 어려워 확장성에 제약을 줄 수 있습니다.

## JVM 실행 시 main 메서드 보다 먼저 실행되는 static 블럭&#x20;

#### 코드가 실행되는 순서를 다시한번 생각해보자

1. .java 파일을 컴파일해 .class 파일을 만든다.
2. JVM 이 .class 파일을 실행하고 클래스 수준의 정보(인스턴스/클래스 변수, 메서드) 를 method 영역에 저장한다.&#x20;
3. main 메서드를 찾아 수행한다.&#x20;
4. 스택 프레임에 메서드가 호출될 때 생성되고 로컬변수, 매개변수, 참조값 등이 저장된다. \
   \-> 참조값에 대한 실제 데이터는 힙 메모리에 저장된다.
5. 메서드 실행이 모두 완료되면, 스택프레임은 반환된다.&#x20;

* 다음과 같은 순서를 보면 알 수 있듯이, main 메서드 이전에 method 영역에 저장되는 클래스 수준의 정보가 저장되는 것을 알 수 있다.&#x20;
* static 블럭 안에서 클래스 변수를 초기화할 수 있다.&#x20;
