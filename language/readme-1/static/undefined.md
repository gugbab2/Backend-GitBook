# 자바 메모리 구조

## 자바 메모리 구조

<figure><img src="../../../.gitbook/assets/스크린샷 2024-01-29 20.38.08.png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/스크린샷 2024-01-29 20.42.31.png" alt=""><figcaption></figcaption></figure>

### 메서드 영역&#x20;

* 클래스 정보를 보관한다. 이 클래스 정보가 붕어빵 틀이다.
* 프로그램을 실행하는데 필요한 공통 데이터를 관리한다.&#x20;
* **메서드 영역은 모든 영역에서 공유한다.**&#x20;
* 메서드 영역에서도 크게 다음과 같은 영역으로 구분할 수 있다.&#x20;
  * **클래스 정보 : 클래스의 실행코드(바이트코드), 필드, 메서드와 생성자 코드 등 모든 실행 코드가 존재한다.**&#x20;
  * **static 영역 : static 변수들을 보관한다.**&#x20;
  * **런타임 상수 풀 : 프로그램을 실행하는데 필요한 공통 리터럴 상수를 보관한다.** \
    **-> ex, "hello" 와 같은 상수**\
    **-> 자바가 최적화 하기 위한 기능으로 생각하면 된다.**&#x20;

> **메서드 코드는 메서드 영역에**
>
> 자바에서 특정 클래스로 100개의 인스턴스를 생성하면, 힙 영역에 100개의 인스턴스가 생겨난다. 각각의 인스턴스는 내부의 변수와 메서드를 가진다. 같은 클래스로 부터 생성된 객체라도, 인스턴스 내부의 변수 값은 서로 다를 수 있겠지만, 메서드는 공통된 코드를 공유한다.&#x20;
>
> 따라서 객체가 생성될 때, 인스턴스 변수에는 메모리가 할당되지만, 메서드에 대한 새로운 메모리 할달은 없다. 메서드는 메서드 영역에서 공통으로 관리되고 실행된다.&#x20;

### 스택 영역&#x20;

* **실제 프로그램이 실행되는 영역이다. 메서드를 실행 할 때마다 하나씩 쌓인다.**&#x20;
* 각 스택 프레임은 지역 변수, 중각 연산 결과, 메서드 호출 정보 등을 포함한다.&#x20;
* **스택 프레임 : 스택 영역에 쌓이는 하나의 프레임으로, 메서드를 호출 할 때마다 스택 프레임이 쌓이고, 메서드가 종료되면 해당 스택 프레임이 제거된다.**&#x20;

> 참고
>
> 스택 영역은 더 정확히는 각 쓰레드별로 하나의 실행 스택이 생성된다. 따라서 쓰레드 수 만큼 스택 영역이 생성된다. 지금은 쓰레드를 하나만 사용하므로 스택 영역도 하나이다.&#x20;

### 힙 영역&#x20;

* 객체(인스턴스) 가 생성되는 영역이다. new 명령어를 사용하면 이 영역을 사용한다. 붕어빵 틀을 통해서 실제 붕어빵을 만든다.&#x20;
* 가비지 컬렉션(GC) 이 이루어지는 주요 영역이며, 더 이상 참조되지 않은 객체는 GC 에 의해 제거된다.&#x20;
