# JIT(Just-In-Time) 컴파일러

#### JIT 는 동적변환으로, 프로그램 실행을 보다 빠르게 하기 위해서 만들어졌다. -> 명칭은 컴파일러지만, 실행시에 적용되는 기술이다.

## 자바에서 기계어를 실행하는 방식

* 인터프리트 방식 : 프로그램 실행 할 때마다 컴퓨터가 알아 들을 수 있는 언어로 변환하는 방법.\
  \-> 간편하지만 성능이 느릴 수 밖에 없다.
* JIT : 인터프리트 방식과 정적 방식을 혼합한 것으로, 변환 작업은 인터프리터에 의해서 지속적으로 수행되지만, 반복되는 코드 정보는 캐시(메모리)에 담아두었다가 재사용한다.
* 자바 소스코드 -> 자바 컴파일러 -> 바이트코드 -> JVM -> 기계어 -> 하드웨어 및 OS\
  \-> 위 과정 중 **JVM -> 기계어로 변환되는 부분을 JIT 에서 담당**한다.
* JIT 컴파일러는 인터프리터에 의해 실행되는 순간 동작하여 바이트 코드를 최적화된 기계어로 변환한다.\
  \-> JIT 를 사용하면 반복적으로 수행되는 코드는 매우 빠른 성능을 보이지만, 반대로 처음 시작할 때에는 변환 단계를 거쳐야 하므로 성능이 느린 단점이 있다.

## C1, C2 컴파일러를 통한 JIT 컴파일러 최적화

* JIT 컴파일러는 반복되는 코드를 캐시에 내장시켜 재사용하는 것이 가장 큰 장점이다.
* 하지만 JVM 의 캐시 공간은 매우 작기 때문에, 모든 코드들을 캐시하는 것은 아니다..
* C1 컴파일러
  * 런타임에 바이트 코드를 기계어로 변환하는 과정만을 수행하고,
* C2 컴파일러
  * 런타임에 바이트 코드를 기계어로 변환한 다음 캐시에 저장하는 과정을 수행한다.
* JVM 은 코드들의 수행 빈도와 복잡도에 따라서 총 4가지 레벨로 분류하여 코드를 수행하는데 이 중 1-3 레벨은 C1 컴파일러를 이용해 기계어로 컴파일만 수행하고, 4레벨의 코드는 C2 컴파일러를 통해서 기계어로 컴파일 뿐 아니라 캐시까지 수행한다.
