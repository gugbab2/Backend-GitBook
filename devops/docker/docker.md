# Docker 기본개념

## Docker 를 왜 배우는 걸까?&#x20;

#### 이식성(!) : 특정 프로그램을 다른 곳으로 쉽게 옮겨서 설치 및 실행할 수 있는 특성&#x20;

A 컴퓨터에 MySQL 을 잘 깔았다. 하지만 B 컴퓨터에 MySQL 을 깔려고 하니 이상하게 에러가 발생하는 것이다.

B 컴퓨터에 MySQL 이 안 깔리는 이유는 다양하다.&#x20;

* 버전을 다른걸 설치&#x20;
* 운영체제가 다름&#x20;
* 각 컴퓨터에 있는 보안 프로그램과 충돌&#x20;

또한 설치 과정은 귀찮다.&#x20;

이러한 과정을 깔끔하게 해결하기 위해 나타난 툴이 Docker 이다. Docker 를 사용하면 명령어 한 줄로 어떤 컴퓨터에든 MySQL 을 에러 없이 설치하고 실행할 수 있게 된다.

&#x20;또한 다음와 같은 장점을 가지고 있다.&#x20;

* 매번 귀찮은 설치 과정을 일일이 거치지 않아도 된다.&#x20;
* 항상 일관되게 프로그램 설치 가능 (버전, 환경 설정, 옵션, 운영 체제 등)&#x20;
* 각 프로그램이 독립적인 환경에서 실행되기 때문에, **프로그램 간 서로 충돌이 발생하지 않는다.**&#x20;

## Docker 란? / 컨테이너란? / 이미지란?&#x20;

### Docker 란?&#x20;

컨테이너를 사용하여 각각의 프로그램을 분리된 환경에서 실행 및 관리할 수 있는 툴이다.&#x20;

### 컨테이너란?&#x20;

윈도우 환경을 생각해보면 하나의 컴퓨터에 여러 사용자로 나눠서 사용할 수 있게끔 구성되어 있다. 각 사용자의 환경에 들어가보면 독립적으로 구성되어 있어서 필요한 프로그램을 각 사용자 환경에 따로따로 설치해주어야 한다.&#x20;

컨테이너도 비슷한 개념으로 독립적인 환경을 구성해서, 각 환경에 프로그램을 별도로 설치할 수 있게 만든 개념이다.&#x20;

물론 가상환경과는 다른 개념이다.&#x20;

* 가상환경 : 가상환경은 하드웨어 위에 하이퍼바이저라는 소프트웨어를 깔고, 그 위에 완전한 운영체제를 통째로 올리는 방식&#x20;
* 컨테이너 : 운영체제 커널은 공유하고 "사용자 영역(User Space)" 만 격리하는 방식&#x20;
  * 디스크, 메모리 (저장 공간) : 각 컨테이너마다 서로 각자의 공간을 가지고 있다. 일반적으로 A 컨테이너 내부에서 B 컨테이너 내부에 있는 파일에 접근할 수 없다.&#x20;
  * 네트워크 (IP, PORT) : 각 컨테이너마다 고유의 네트워크를 가지고 있다. 컨테이너는 각자의 IP, PORT 주소를 가지고 있다.
    * IP 주소 : 도커를 설치하면 호스트 서버 내에 "가상의 네트워크 브릿지" 가 생성 된다.&#x20;
      * 도커가 실행하는 모든 컨테이너는 이 브릿지 네트워크에 연결되며, 각각 172.x.x.x 와 같은 사설 IP 주소를 독립적으로 할당받는다.&#x20;
      * 컨테이너 A 가 컨테이너 B 로 데이터를 보낼 때, 이 내부 IP 주소를 사용해서 직접 통신한다. **이 내부 네트워크는 기본적으로 호스트 서버 외부에서는 접근할 수 없다. (보안 강화)**
      * 컨테이너 이전 방식에서는 서버 한 대의 IP 만 사용했지만, 도커에서는 논리적으로 컨테이너 수만큼 내부 IP 가 생성되어 컨테이너에 할당된다.&#x20;
    * Port : 외부 요청은 포트 포워딩을 통해 내부 컨테이너로 연결이 가능하다.&#x20;
    * 일반적으로는 웹 서비스에서는 "도메인 기반 라우팅" 한다.

여기서 컨테이너와 컨테이너를 포함하고 있는 컴퓨터를 구분하기 위해 컨테이너를 포함하고 있는 컴퓨터를 '호스트 컴퓨터' 라고 부른다.&#x20;

### 이미지란?&#x20;

이미지는 프로그램을 실행하는데 필요한 설치 과정, 설정, 버전 정보 등을 포함하고 있다.&#x20;

즉, 프로그램을 실행하는 데 필요한 모든 것을 포함하고 있다.&#x20;

**때문에, 이미지를 실행하면 이미지에서 설정한 설정값을 기반으로 컨테이너가 실행된다.**&#x20;
