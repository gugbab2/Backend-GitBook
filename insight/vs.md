# 단위 테스트 vs 통합 테스트

## 단위 테스트(Unit Test)&#x20;

#### 개요

* 정의 : 단위 테스트는 소프트웨어의 가장 작은 단위(메서드, 함수, 클래스)를 개별적으로 테스트 하는 것을 목표로 합니다.&#x20;
* 목적 : 특정 코드의 단일 기능이 예상대로 동작하는지 검증한다.&#x20;

#### 장점

* 빠른 실행 : 단위 테스트는 독립적이고 작은 단위의 테스트이므로 매우 빠르게 실행
* 디버깅이 용이 : 문제가 발생했을 때, 어떤 코드가 원인인지 바로 알 수 있다. \
  \-> Java 의 JUnit, Python 의 PyTest 가 대표적&#x20;
* 리팩토링에 안전 : 코드를 리팩토링하더라도 단위 테스트가 통과되면 기능이 유지되고 있을음 확신할 수 있다.&#x20;
* 문서화 역할 : 테스트 코드는 해당 기능이 어떻게 사용되늕지와 기대 결과를 보여주는 문서의 역할을 한다.&#x20;

#### 단점&#x20;

* 제한된 범위 : 단위 테스트는 시스템의 다른 부분과의 상호작용을 테스트하지 않기 떄문에, 모든 문제를 발견하지 못할 수 있다. \
  \-> 통합 테스트 필요 이유&#x20;
* 의존성 격리 필요 : 데이터베이스나 외부 API 와의 상호작용을 포함하지 않기 위해서 Mocking 을 사용해야 하며, 이 과정이 복잡해 질 수 있다.&#x20;

```java
public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }
}

public class CalculatorTest {
    @Test
    public void testAdd() {
        Calculator calculator = new Calculator();
        int result = calculator.add(2, 3);
        assertEquals(5, result);  // 2 + 3은 5여야 합니다.
    }
}
```

> ### Mocking 은 무엇인가?
>
> * 정의 : Mocking 은 테스트 시 실제 객체를 사용하는 대신, 그 객체의 행동을 흉내내는 가짜 객체( Mocking) 를 만들어 사용하는 기법이다. 이 가짜 객체는 프로덕션 환경의 실제 동작을 모방하지만, 데스트 환경에서만 동작한다.&#x20;
> * 목적 : Mocking 은 테스트 대상 코드가 외부 의존성(DB, API, File System 등 ) 에 영향을 받지 않고 독립적으로 테스트 될 수 있도록 한다.&#x20;
> * 사용 이유 : 단위 테스트는 코드의 작은 단위가 독립적으로 동작하는지를 확인하는 것이 목적이다. 하지만, 코드가 데이터베이스나 외부 API 같은 외부 의존성을 가지고 있다면, 테스트 결과가 해당 의존성에 영향을 받을 수 있다. 이러한 상황을 피하기 위해서 Mocking 을 사용하여 외부 의존성을 대체한다.&#x20;

## 통합 테스트(Integration Test)

#### 개요

* 정의 : 통합 테스트는 여러 모듈이나 컴포넌트가 함께 동작할 때, 그들의 상호작용이 기대대로 이루어지는지를 검증한다.&#x20;
* 목적 : 시스템 구성 요소들이 통합되어 올바르게 동작하는지 확인한다.&#x20;

#### 장점

* 종합적인 테스트 : 모듈 간의 상호작용을 검증하여, 단위 테스트로는 발견할 수 없는 문제를 찾아낼 수 있다.&#x20;
* 실제 환결과 유사 : 실제 데이터베이스나 파일 시스템 등 외부 의존성과의 통합된 환경에서 테스트가 이루어지므로, 현실적인 시나리오를 다룬다.&#x20;
* 비지니스 로직 검증 : 여러 모듈이 함께 동작할 때, 비지니스 로직이 제대로 수행하는지 검증할 수 있다.&#x20;

#### 단점&#x20;

* 느린 실행 : 통합 테스트는 여러 모듈 및 실제 의존성을 포함하므로 실행 속도가 느리다.&#x20;
* 디버깅이 어려움 : 실패 시, 문제가 발생한 정확한 위치를 파악하는데 시간이 소요된다.&#x20;
* 복잡한 설정 : 데이터베이스, 파일 시스템, 외부 API 등 실제 의존성 설정이 필요하므로 준비와 유지 관리가 복잡할 수 있다.&#x20;

```java
@SpringBootTest
public class UserServiceIntegrationTest {
    @Autowired
    private UserService userService;

    @Test
    public void testCreateUser() {
        User user = new User("John", "Doe");
        User savedUser = userService.createUser(user);
        assertNotNull(savedUser.getId());  // User가 성공적으로 저장되어 ID가 생성되었는지 확인
    }
}
```
